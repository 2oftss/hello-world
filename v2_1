<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>PadKeyGen</title>
</head>
<body>
/api.php?<br>
<textarea id="c" cols="100" rows="10"></textarea>
<br><br>
<input type="button" value="Get Key" onclick="$('p').value=GetKey($('c').value,$('n').value);">　　　　
<input type="text" id="n" size="3"> n=0...255	
<br><br>
<textarea id="p" cols="100" rows="10"></textarea>
<p>
<script type="text/javascript">
<!--
function GetKey(c,n)
{

var base = 35362;
var base2 = 80;
var xor = 57937;
var sum=0;
var off=0;

n = parseInt(n);
if (!(0 <= n && n <= 255)) {
	n = Math.floor(Math.random() * 256);
	}

for (var i = 0; i < c.length; i++) {
	sum+=c.charCodeAt(i);
	}

off=(sum^xor)-xor;
newval=(base+107*n+off) % 65536;
newval2 = (base2+33*n) % 256;

halfkey1= (newval).toString(16);
qkey2= (newval2).toString(16);
qkey3= (n).toString(16);

while (halfkey1.length < 4) halfkey1 = '0' + halfkey1;
while (qkey2.length < 2) qkey2 = '0' + qkey2;
while (qkey3.length < 2) qkey3 = '0' + qkey3;

key=halfkey1.substr(2, 2)+qkey2.substr(0, 1)+qkey3.substr(0, 1)+halfkey1.substr(0, 2)+qkey3.substr(1, 1)+qkey2.substr(1, 1);

str = "sum="+sum+"; off="+off+"; n="+n+"\n"+c+"&key="+key.toUpperCase();
return str;
}

function $(id)
{
	return document.getElementById(id);
}
//-->
</script>
</body>
</html>
